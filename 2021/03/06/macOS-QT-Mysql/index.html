<!DOCTYPE html>
<html>
  <!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  
  <title>macOS 安装 QT 5.13.2 并配置mysql驱动 - The One</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  
  <meta name="keywords" content=Tool>
  
  
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.02">
  
  
    <link rel="alternate" href="/atom.xml " title="The One" type="application/atom+xml">
  

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>
  <body>
    <div class="container">
      <header class="header">
  <div class="blog-title">
    <a href="/" class="logo">The One</a>
    <div class="subtitle"></div>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">Home</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">Archives</a>
        </li>
      
        <li class="menu-item">
          <a href="/about" class="menu-item-link">About</a>
        </li>
      
    </ul>
  </nav>
</header>
<article class="post">
  <div class="post-title">
    <h1 class="article-title">macOS 安装 QT 5.13.2 并配置mysql驱动</h1>
  </div>
   <div class="post-meta">
    <span class="post-time">2021-03-06</span>
  </div>
  <div class="post-content">
    <h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul>
<li><p>系统版本：macOS Catalina 10.15.7</p>
</li>
<li><p>Mysql版本：5.7.32 （通过brew安装）</p>
<p>默认的安装路径 ：/usr/local/Cellar/mysql@5.7/5.7.32</p>
</li>
<li><p>QT 版本：5.13.2</p>
</li>
</ul>
<h2 id="QT下载、安装与配置"><a href="#QT下载、安装与配置" class="headerlink" title="QT下载、安装与配置"></a>QT下载、安装与配置</h2><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><p><a target="_blank" rel="noopener" href="https://download.qt.io/archive/">点击去下载</a></p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/1.png" alt="image-20210306150654537"></p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>下载完成后的安装可以<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33154343/article/details/103231202">可以参考这篇文章</a></p>
<h4 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h4><ul>
<li><p>使用 zsh </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br></pre></td></tr></table></figure>

<p>把下面内容追加到 <code>.zshrc</code> 文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> QTDIR=/Users/obiscr/Qt5.13.2/5.13.2/clang_64			<span class="comment"># 这个地方目录修改成自己的安装路径</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$QTDIR</span>/lib:<span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$QTDIR</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>

<p>然后保存并且重新加载配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure></li>
<li><p>使用系统默认的终端</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bash_profile</span><br></pre></td></tr></table></figure>

<p>  把下面内容追加到 <code>.zshrc</code> 文件</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> QTDIR=/Users/obiscr/Qt5.13.2/5.13.2/clang_64			<span class="comment"># 这个地方目录修改成自己的安装路径</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$QTDIR</span>/lib:<span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$QTDIR</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>

<p>  然后保存并且重新加载配置文件</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Mysql下载与安装"><a href="#Mysql下载与安装" class="headerlink" title="Mysql下载与安装"></a>Mysql下载与安装</h2><ul>
<li><p>手动下载安装包安装</p>
<p><a target="_blank" rel="noopener" href="https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.31-macos10.14-x86_64.dmg">下载</a>这个链接是5.7.31版本的mysql</p>
</li>
<li><p>通过包管理工具安装</p>
<p>执行 <code>brew install mysql@5.7</code> 安装。brew本身的安装就不说了。</p>
</li>
</ul>
<h2 id="安装Xcode"><a href="#安装Xcode" class="headerlink" title="安装Xcode"></a>安装Xcode</h2><p>从应用商店下载安装即可。</p>
<h2 id="编译驱动"><a href="#编译驱动" class="headerlink" title="编译驱动"></a>编译驱动</h2><p>先说下下面会用到的相关路径：</p>
<p>QT的安装路径：/Users/obiscr/Qt5.13.2/</p>
<p>Mysql安装路径：/usr/local/Cellar/mysql@5.7/5.7.32</p>
<p>实际操作的时候需要替换成自己对应的路径</p>
<p>首先，进入 /Users/obiscr/Qt5.13.2/5.13.2/Src/qtbase/src/plugins/sqldrivers 目录，这个目录下有个mysql文件夹，修改mysql文件夹里面的 mysql.pro 文件（<font color='red'>默认情况下会使用 QT 打开，不建议使用其他文本编辑器，我用其他文本编辑器修改的时候出现了点问题</font>）。打开之后，做如下改动：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">TARGET = qsqlmysql</span><br><span class="line"></span><br><span class="line">HEADERS += $<span class="variable">$PWD</span>/qsql_mysql_p.h</span><br><span class="line">SOURCES += $<span class="variable">$PWD</span>/qsql_mysql.cpp $<span class="variable">$PWD</span>/main.cpp</span><br><span class="line"></span><br><span class="line"><span class="comment"># QMAKE_USE += mysql	# 这一行前面 添加 ‘#’ 注释掉</span></span><br><span class="line"></span><br><span class="line">OTHER_FILES += mysql.json</span><br><span class="line"></span><br><span class="line">PLUGIN_CLASS_NAME = QMYSQLDriverPlugin</span><br><span class="line">include(../qsqldriverbase.pri)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后添加下面两行</span></span><br><span class="line">INCLUDEPATH += <span class="string">&quot;/usr/local/Cellar/mysql@5.7/5.7.32/include/mysql&quot;</span>		<span class="comment"># 修改成自己的路径	</span></span><br><span class="line">LIBS += <span class="string">&quot;/usr/local/Cellar/mysql@5.7/5.7.32/lib/libmysqlclient.20.dylib&quot;</span> <span class="comment"># 修改成自己的路径</span></span><br></pre></td></tr></table></figure>

<p>终端进入 /Users/obiscr/Qt5.13.2/5.13.2/Src/qtbase/src/plugins/sqldrivers 目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /Users/obiscr/Qt5.13.2/5.13.2/Src/qtbase/src/plugins/sqldrivers</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入之后先执行下面的命令</span></span><br><span class="line">qmake</span><br></pre></td></tr></table></figure>
<p>输出信息如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Info: creating stash file /Users/obiscr/Qt5.13.2/5.13.2/Src/qtbase/src/plugins/sqldrivers/.qmake.stash</span><br><span class="line"></span><br><span class="line">Running configuration tests...</span><br><span class="line">Checking <span class="keyword">for</span> DB2 (IBM)... no</span><br><span class="line">Checking <span class="keyword">for</span> InterBase... no</span><br><span class="line">Checking <span class="keyword">for</span> MySQL... yes</span><br><span class="line">Checking <span class="keyword">for</span> OCI (Oracle)... no</span><br><span class="line">Checking <span class="keyword">for</span> ODBC... no</span><br><span class="line">Checking <span class="keyword">for</span> PostgreSQL... no</span><br><span class="line">Checking <span class="keyword">for</span> SQLite (version 2)... no</span><br><span class="line">Checking <span class="keyword">for</span> TDS (Sybase)... no</span><br><span class="line">Done running configuration tests.</span><br><span class="line"></span><br><span class="line">Configure summary:</span><br><span class="line"></span><br><span class="line">Qt Sql Drivers:</span><br><span class="line">  DB2 (IBM) .............................. no</span><br><span class="line">  InterBase .............................. no</span><br><span class="line">  MySql .................................. yes</span><br><span class="line">  OCI (Oracle) ........................... no</span><br><span class="line">  ODBC ................................... no</span><br><span class="line">  PostgreSQL ............................. no</span><br><span class="line">  SQLite2 ................................ no</span><br><span class="line">  SQLite ................................. yes</span><br><span class="line">    Using system provided SQLite ......... no</span><br><span class="line">  TDS (Sybase) ........................... no</span><br><span class="line"></span><br><span class="line">Qt is now configured <span class="keyword">for</span> building. Just run <span class="string">&#x27;make&#x27;</span>.</span><br><span class="line">Once everything is built, you must run <span class="string">&#x27;make install&#x27;</span>.</span><br><span class="line">Qt will be installed into <span class="string">&#x27;/Users/obiscr/Qt5.13.2/5.13.2/clang_64&#x27;</span>.</span><br><span class="line"></span><br><span class="line">Prior to reconfiguration, make sure you remove any leftovers from</span><br><span class="line">the previous build.</span><br></pre></td></tr></table></figure>

<p>然后执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make sub-mysql</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>



<h2 id="需要注意的问题"><a href="#需要注意的问题" class="headerlink" title="需要注意的问题"></a>需要注意的问题</h2><p><font color='red'>如果是用 brew 安装 的 mysql</font> 有个地方需要调整下:</p>
<ol>
<li><p>INCLUDEPATH 大多数的教程写的都是 &lt;mysql安装路径&gt;/include</p>
<p>比如：<code>D:/mysql5.7/include</code>  或者  <code>/usr/local/mysql</code>  这样的，但是 brew 安装的mysql 它的include目录下面还有一层目录</p>
<p>名字叫作 mysql</p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/2.png" alt="image-20210306154224022"></p>
<p>所以在配置的时候需要配置成 &lt;mysql安装路径&gt;/include/mysql    这个要特别注意，否则make的时候会提示</p>
<p>mysql_xxxx.h not found 之类的错误。</p>
<p>所以在这个路径中，手动添加了红色的 <code>/mysql</code> 之后才得以报错消失：</p>
<p><b>INCLUDEPATH += “/usr/local/Cellar/mysql@5.7/5.7.32/include<font color='red'>/mysql</font>“</b></p>
</li>
<li><p>LIBS 大多数的教程写的是 &lt;mysql安装路径&gt;/lib，但是你如果配置成这样子的话，对方会拒绝你的make 并且给你丢了一个异常。有很长的一串，只截图了之后的。关键是红色的文字。</p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/3.png" alt="image-20210306154709464"></p>
<p>其实我刚看到也是挺懵的，去找 <b>make[2]: *** [../plugins/sqldrivers/libqsqlmysql.dylib] Error 1</b> 这个文件的时候发现，sqldrivers 目录下根本没有这个文件。于是就把目标放到了 红色框框中的一行。关键是看到了那个linker ，突然想到  <b>&lt;mysql安装路径&gt;/lib</b> 目录下有个软连接，不知道跟这个有没有关系，就是下面图上这个。红色框中的是的链接文件，蓝色框中的是这个链接文件的原身，于是试着改了一下 LIBS 的配置：</p>
<p>原本的配置</p>
<p><b>LIBS += “/usr/local/Cellar/mysql@5.7/5.7.32/lib”</b></p>
<p>改成了</p>
<p><b>LIBS += “/usr/local/Cellar/mysql@5.7/5.7.32/lib<font color='red'>/libmysqlclient.20.dylib</font>“</b></p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/4.png" alt="image-20210306155815932"></p>
<p>于是乎 ，LIBS 路径就变成了下面这样子，添加了红色的 <code>/libmysqlclient.20.dylib</code></p>
<p><b>LIBS += “/usr/local/Cellar/mysql@5.7/5.7.32/lib<font color='red'>/libmysqlclient.20.dylib</font>“</b></p>
</li>
</ol>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>上面也说了，遇到的问题是用 brew 安装的mysql 才会有这种问题。如果是手动安装的不清楚是否也是有这种问题。我没有测试。自己在操作的时候如果没有遇到上述情况，就不需要加这边的 /mysql 和 /libmysqlclient.20.dylib</p>
<p><b>INCLUDEPATH += “/usr/local/Cellar/mysql@5.7/5.7.32/include<font color='red'><del>/mysql</del></font>“</b></p>
<p><b>LIBS += “/usr/local/Cellar/mysql@5.7/5.7.32/lib<font color='red'><del>/libmysqlclient.20.dylib</del></font>“</b></p>
<h2 id="在QT中进行测试"><a href="#在QT中进行测试" class="headerlink" title="在QT中进行测试"></a>在QT中进行测试</h2><h3 id="在线（推荐）"><a href="#在线（推荐）" class="headerlink" title="在线（推荐）"></a>在线（推荐）</h3><p>可以直接克隆github的测试工程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/obiscr/mysql-connect-test.git</span><br></pre></td></tr></table></figure>

<p>然后使用QT打开工程，打开后如图所示</p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-10.png" alt="image-20210306155815932"></p>
<p>替换代码中默认的数据库密码之后，点击运行，查看运行结果。出现链接成功则配置完成。</p>
<h3 id="离线"><a href="#离线" class="headerlink" title="离线"></a>离线</h3><p>如果网络不方便，也可以手动创建测试工程。</p>
<ol>
<li>打开QT，点击 <b>New Project</b></li>
</ol>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-1.png" alt="image-20210306155815932"></p>
<ol start="2">
<li>选择 <b>QT Widgets Application</b>  然后选择 <b>Choose</b></li>
</ol>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-2.png" alt="image-20210306155815932"></p>
<ol start="3">
<li><p>名称和创建路径可以随便写，点击 <b>继续</b></p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-3.png" alt="image-20210306155815932"></p>
</li>
<li><p>默认配置，不用动，点击 <b>继续</b></p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-4.png" alt="image-20210306155815932"></p>
</li>
<li><p>默认配置，不用动，点击 <b>继续</b></p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-5.png" alt="image-20210306155815932"></p>
</li>
<li><p>默认配置，不用动，点击 <b>继续</b></p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-6.png" alt="image-20210306155815932"></p>
</li>
<li><p>版本控制选不选都可以，点击 <b>继续</b></p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-7.png" alt="image-20210306155815932"></p>
</li>
<li><p>创建完成之后的默认的工程目录如下</p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-8.png" alt="image-20210306155815932"></p>
</li>
<li><p>首先修改一下 pro 文件的引入的库，第一行添加 <code> sql</code>（注意：gui 和 sql 之间需要添加空格）</p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-9.png" alt="image-20210306155815932"></p>
</li>
<li><p>然后把 <b>main.cpp</b> 中默认生成的内容删掉，用下面的代码替换（注意数据库密码需要替换成自己的）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QSqlDatabase&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QSqlQuery&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QSqlError&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">connect_mysql</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">       QSqlDatabase db=QSqlDatabase::<span class="built_in">addDatabase</span>(<span class="string">&quot;QMYSQL&quot;</span>);</span><br><span class="line">       db.<span class="built_in">setHostName</span>(<span class="string">&quot;127.0.0.1&quot;</span>);     <span class="comment">// 主机名(如果填写127.0.0.1不能连接，则改成 localhost)</span></span><br><span class="line">       db.<span class="built_in">setPort</span>(<span class="number">3306</span>);                <span class="comment">// 端口</span></span><br><span class="line">       db.<span class="built_in">setDatabaseName</span>(<span class="string">&quot;mysql&quot;</span>);    <span class="comment">// 数据库</span></span><br><span class="line">       db.<span class="built_in">setUserName</span>(<span class="string">&quot;root&quot;</span>);          <span class="comment">// 账号</span></span><br><span class="line">       db.<span class="built_in">setPassword</span>(<span class="string">&quot;root&quot;</span>);    <span class="comment">// 密码</span></span><br><span class="line">       db.<span class="built_in">open</span>();</span><br><span class="line">       <span class="keyword">if</span>(!db.<span class="built_in">open</span>())</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;不能连接&quot;</span>&lt;&lt;<span class="string">&quot;connect to mysql error&quot;</span>&lt;&lt;db.<span class="built_in">lastError</span>().<span class="built_in">text</span>();</span><br><span class="line">           <span class="keyword">return</span> ;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">       &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;连接成功&quot;</span>&lt;&lt;<span class="string">&quot;connect to mysql OK&quot;</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="function">QSqlQuery <span class="title">query</span><span class="params">(db)</span></span>;</span><br><span class="line">       query.<span class="built_in">exec</span>(<span class="string">&quot;select * from user&quot;</span>);</span><br><span class="line">       <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;----- Data of mysql.user -----&quot;</span>;</span><br><span class="line">       <span class="keyword">while</span>(query.<span class="built_in">next</span>())&#123;</span><br><span class="line">           <span class="built_in">qDebug</span>()&lt;&lt; <span class="string">&quot;Host:&quot;</span> &lt;&lt; query.<span class="built_in">value</span>(<span class="string">&quot;Host&quot;</span>).<span class="built_in">toString</span>() &lt;&lt; <span class="string">&quot;User:&quot;</span> &lt;&lt; query.<span class="built_in">value</span>(<span class="string">&quot;user&quot;</span>).<span class="built_in">toString</span>();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc,argv)</span></span>;</span><br><span class="line">    <span class="built_in">connect_mysql</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>替换完成之后如下图。然后点击运行，查看运行结果。出现连接成功则配置完成。</p>
<p><img src="https://obiscr.oss-cn-hongkong.aliyuncs.com/res/macOS-QT-Mysql/new-project-10.png" alt="image-20210306155815932"></p>
</li>
</ol>

  </div>
  <div class="post-footer">
    
      <ul class="post-tag-list" itemprop="keywords"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/Tool/" rel="tag">Tool</a></li></ul>
    

    <a href="#top" class="top">Back to Top</a>
  </div>
</article>
<footer>
  &copy; 2021
  <span class="author">
    Pierce Brands
  </span>
</footer>
    </div>
  </body>
</html>